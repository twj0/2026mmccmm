# Q2：机制对比与争议案例（Rank vs Percent + Judge Save）

## 0. 我对题目的理解（聚焦 Q2）

题目要求我们用 **Q1 的粉丝票估计**配合其余数据，完成：

- 对比 Rank（排名加和）与 Percent（百分比加和）两种规则在各赛季的结果差异。
- 针对争议选手/争议赛季（S2 Jerry Rice、S4 Billy Ray Cyrus、S11 Bristol Palin、S27 Bobby Bones）进行复盘：
  - 如果换一种机制，结果是否相同？
  - 如果加入 Judge Save（bottom-2 由评委淘汰其一），影响有多大？
- 最终要给制作人建议：未来更推荐哪种机制，以及是否应该保留 Judge Save。

## 1. 数据与现实约束（影响 Q2 的建模假设）

- 官方数据只给评委分与最终结果，不给票数；因此 Q2 的反事实模拟必须基于 **Q1 后验样本**（概率结论），而不是单点票数。
- 机制切换时间不完全确定（题面提示“合理假设 season 28”）。因此 Q2 必须做 **敏感性分析**：将切换季作为参数，检查结论稳健性。

## 2. 统一的“反事实仿真输入”：如何承接 Q1

Q1 可能分别给出两种类型的后验：

- Percent 路线：每周份额 `pF_{s,t,i}` 的样本（在 simplex 上）。
- Rank 路线：每周排名 `rF_{s,t,i}` 的样本（permutation）。

为保证 Q2 能在两种机制下都跑，我们定义一个“统一输入”层：

- **方案 A（KISS，推荐）**：
  - 以 `pF` 为主（份额最直观）。
  - 在 Rank 规则下，将 `pF` 排序得到 `rF = rank(-pF)`；平分可随机打破并对多次打破平均。

- **方案 B（炫技，但更复杂）**：
  - 引入潜变量 `z_{s,t,i}` 表示粉丝偏好强度。
  - 通过 `pF = softmax(z)` 供 Percent 规则使用；通过 `rF = rank(-z)` 或 Plackett–Luce 供 Rank 规则使用。
  - 优点：同一后验可自然映射两种机制，减少“跨机制转换偏差”。

本阶段先采用方案 A 写报告（可解释），方案 B 作为扩展加分点。

## 3. 反事实仿真框架（核心交付）

### 3.1 单季仿真（给定一条后验样本路径）

对每个 season `s`：

1. 初始化参赛集合 `A_{s,1}`。
2. 对每周 `t`：
   - 从 Q1 后验抽取该周 `pF_{s,t,*}`（或 `rF_{s,t,*}`）。
   - 计算评委端：
     - Percent：`pJ_{s,t,i} = J_{s,t,i}/sum J`
     - Rank：`rJ_{s,t,i} = rank(-J_{s,t,i})`
   - 在指定机制下计算合并结果并淘汰：
     - Percent：`T_i = pJ_i + pF_i`，淘汰 `argmin T`
     - Rank：`S_i = rJ_i + rF_i`，淘汰 `argmax S`
   - 处理当周特殊情况：无淘汰/双淘汰/退赛（依据官方 `results` 与 active 集合变化）。
3. 记录整季路径：冠军、前 3、每周淘汰者。

### 3.2 概率结论（用后验样本集做 Monte Carlo）

重复上面的“单季仿真” M 次（M 越大越稳），得到：

- `Pr(win=i | mechanism)`、`Pr(final3 contains i | mechanism)`
- `Pr(eliminate_at_week=t | mechanism)`
- 机制差异：同一选手在两机制下冠军概率之差、淘汰周分布之差。

这一步回答题目“compare and contrast across seasons”。

## 4. 机制偏向性的量化指标（必须数学化）

为了回答“哪种方法更偏向粉丝票/更保护技术流”，我们定义可跨季汇总的指标：

### 4.1 技术保护指数（Technical Protection Index, TPI）

- 定义：冠军在决赛周（或赛季平均）评委排名分位数：
  - `TPI_s = 1 - (rankJ_winner - 1)/(n-1)`
  - 越接近 1 表示越保护技术高者。

### 4.2 人气放大指数（Fan Amplification Index, FAI）

- 用粉丝份额的集中度衡量“断层人气”对结果的放大：
  - `HHI_t = sum_i pF_i^2`
- 在同一 `HHI` 水平下，比较两机制的“低评委高人气”选手晋级概率增量。

### 4.3 灵敏度（Sensitivity to fan shock）

- 对某选手 i 的粉丝份额施加小扰动 `pF_i += eps`（再归一化），比较冠军概率变化：
  - `Sens_i = (Pr_win_after - Pr_win_before)/eps`
- 对比 Rank vs Percent 的平均/分位数灵敏度分布。

## 5. Judge Save 的建模（题面新增机制）

### 5.1 规则化定义

在每周：

1. 先按机制得到 bottom-2 候选集合 `B={b1,b2}`。
2. 评委在 `B` 中选择淘汰一人。

### 5.2 评委决策模型（从简单到扩展）

- **确定性版（最小假设）**：淘汰评委分更低者。
- **带噪声版（更现实）**：
  - `Pr(eliminate=b1) = sigmoid((J_{b2}-J_{b1})/kappa)`
  - `kappa` 控制评委“主观/节目效果”噪声。

### 5.3 量化 Judge Save 的作用

- 定义修正幅度：
  - `Delta_s = Pr_win_with_save - Pr_win_without_save`（对争议选手特别关注）
- 以及“技术保护提升”：比较 `TPI_s` 在有/无 save 的变化。

## 6. 争议案例复盘写法（可直接写进论文的模板）

对每个争议选手（如 Bobby Bones）：

- **事实**：给出其评委排名轨迹与最终名次。
- **Q1 反推**：展示其关键周 `pF` 后验（中位数+区间）以及“争议指数”（评委 vs 粉丝分歧）。
- **反事实**：
  - Rank vs Percent 下的 `Pr(win)`、`Pr(final3)`、关键周淘汰概率。
  - 加入 Judge Save 后上述概率如何变化。
- **解释**：用指标（TPI/FAI/Sens）说明该机制如何放大/抑制“低分高票”。

## 7. 可视化（主线 + 炫技）

- 赛季级：
  - 机制对比表：冠军变化率、Top3 变化率、TPI/FAI 指标汇总。
  - 冠军概率条形图（两机制并列）。
- 案例级：
  - 淘汰路径概率的 alluvial/sankey（展示“在另一机制下更可能被谁替换”）。
  - 争议周的 `pF` 后验 violin/box + `J` 对比。

## 8. 风险与稳健性

- 机制切换季不确定：对 `switch_season ∈ {27,28,29}` 做敏感性分析。
- Q1 后验依赖先验强度：报告“有外生先验 vs 无外生先验”的结论对照。
- 多淘汰/无淘汰周：在仿真中按观测规则强制处理，避免仿真路径与事实季结构冲突。